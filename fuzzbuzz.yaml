base: ubuntu:16.04
language: c++
setup:
  - sudo apt-get update
  - sudo apt-get install -y bsdmainutils libboost-program-options-dev libboost-all-dev  libdb5.3++ software-properties-common  libqt5gui5 libqt5core5a libqt5dbus5 qttools5-dev qttools5-dev-tools libprotobuf-dev protobuf-compiler clang-format clang-tidy clang libc++-dev libc++1 libc++abi-dev libc++abi1 libclang-dev libclang1 libllvm-ocaml-dev libomp-dev libomp5 lldb llvm-dev llvm-runtime llvm autoconf libtool pkg-config openssl libssl-dev libevent-dev 
  - CC=clang CXX=clang++ ./autogen.sh
  - CC=clang CXX=clang++ ./configure --enable-fuzz --with-sanitizers=address,fuzzer,undefined
targets:
  - name: script-flags
    setup:
      - make
    harness:
      binary: src/test/fuzz/script_flags
